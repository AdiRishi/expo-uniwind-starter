# AGENTS.md

This file provides guidance to AI agents when working with code in this repository.

## Project Overview

Expo 55 + React Native 0.83 cross-platform starter (iOS, Android, web) with Uniwind (Tailwind CSS v4 for React Native), HeroUI Native components, and Expo Router file-based routing. Uses React 19 with the React Compiler enabled.

## Commands

```bash
pnpm start               # Expo dev server (press i/a/w for iOS/Android/web)
pnpm run ios             # Build and run on iOS simulator
pnpm run android         # Build and run on Android emulator
pnpm run web             # Web dev server
pnpm run check           # Lint + format check + typecheck (CI-ready)
pnpm run lint            # ESLint only
pnpm run typecheck       # TypeScript strict check only
pnpm run format          # Prettier auto-format
pnpm run rename          # Rename project (updates package.json + app.json)
```

Package manager is **pnpm** (pinned to 10.29.2). Do not use npm or yarn.

## Architecture

### Routing & Screen Separation

Route files in `src/app/` are minimal — they render screen components from `src/screens/`. This keeps route files thin while screen components hold the actual page logic. The root `_layout.tsx` wraps the app in `GestureHandlerRootView` → `HeroUINativeProvider` → `AppTabs` (native tab navigation).

### Styling System

All styling flows through **Uniwind** (Tailwind CSS v4 for React Native):

- **Theme tokens** are defined in `src/global.css` using oklch colors with `@variant light` / `@variant dark` blocks
- **Component variants** use `tv()` from `tailwind-variants` — see `src/components/ui/typography.tsx` for the pattern
- **HeroUI Native** components automatically consume the CSS theme variables
- **Metro integration**: `metro.config.cjs` wraps the default config with `withUniwindConfig()`, pointing to `src/global.css` as the CSS entry file
- `src/uniwind-types.d.ts` is auto-generated by Uniwind — do not edit manually

### Path Aliases

- `@/*` → `src/*`
- `@/assets/*` → `assets/*`

### Design System Primitives

- `Typography` component (`src/components/ui/typography.tsx`): variant-driven text (display, h1-h4, body, small, caption, code, link) with tone and alignment props
- `StandardView` / `StandardScrollView` (`src/components/ui/screen-containers/`): consistent safe-area containers
- Platform-specific files use `.ios.tsx`, `.android.tsx` and `.web.tsx` suffix for iOS, Android and web overrides respectively.

### Theme Access

Use the `useThemeColors()` hook from `src/hooks/use-theme-colors.ts` when you need HeroUI theme colors in component logic (e.g., for animated values or non-className style props).

## Conventions

- Indentation and line length rules are defined in `.editorconfig`
- Prettier handles import sorting (third-party → `@/` aliases → relative) and Tailwind class sorting
- `tv()` function is recognized by both Prettier (class sorting) and VSCode (Tailwind IntelliSense)

## Known Pinned Versions

- `react-native-svg` pinned to 15.15.3 (not 15.15.1) to avoid a Node `buffer` import bug
- `hermes-compiler` overridden to 250829098.0.4 via `pnpm.overrides` — required for Hermes V1 runtime. This version must match the Hermes runtime built into React Native; do not bump independently. Native builds use `buildReactNativeFromSource` + `useHermesV1` via `expo-build-properties` in `app.json`
